<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>é¢˜ç›®ç¼–è¾‘å™¨</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>é¢˜ç›®ç¼–è¾‘å™¨</h1>    <div class="type-bar">
        <div class="type-left">
            <button class="type-btn active" data-type="å•é€‰é¢˜å¹²æ— å›¾">å•é€‰é¢˜å¹²æ— å›¾</button>
            <button class="type-btn" data-type="å•é€‰é¢˜å¹²æœ‰å›¾">å•é€‰é¢˜å¹²æœ‰å›¾</button>
            <button class="type-btn" data-type="å¤šé€‰é¢˜å¹²æ— å›¾">å¤šé€‰é¢˜å¹²æ— å›¾</button>
            <button class="type-btn" data-type="å¤šé€‰é¢˜å¹²æœ‰å›¾">å¤šé€‰é¢˜å¹²æœ‰å›¾</button>
            <button class="type-btn" data-type="å¡«ç©ºé¢˜å¹²æ— å›¾">å¡«ç©ºé¢˜å¹²æ— å›¾</button>
            <button class="type-btn" data-type="å¡«ç©ºé¢˜å¹²æœ‰å›¾">å¡«ç©ºé¢˜å¹²æœ‰å›¾</button>
            <button class="type-btn" data-type="ææ–™é¢˜">ææ–™é¢˜</button>
        </div>
        <div class="type-right">
            <button id="addCardBtn" class="add-card-btn">+ æ·»åŠ é¢˜å¡</button>
            <button id="previewBtn" class="add-card-btn" style="background: linear-gradient(135deg, #42a5f5, #1976d2);">ğŸ‘ é¢„è§ˆé¢˜åº“</button>
            <button id="modifyBtn" class="add-card-btn" style="background: linear-gradient(135deg, #7b1fa2, #4a148c);">âœ ä¿®æ”¹é¢˜åº“</button>
            <button id="exportBtn" class="add-card-btn" style="background: linear-gradient(135deg, #ff9800, #f57c00);">ğŸ“¦ å¯¼å‡ºZIP</button>
        </div>
    </div>
    <div class="main-container">
        <div class="editor-layout">
            <div class="slide-preview-panel">
                <div class="slide-preview-header">é¢˜ç›®åˆ—è¡¨</div>
                <div id="slidePreviewList" class="slide-preview-list"></div>
            </div>
            <div class="editor-main">
                <div id="cardList"></div>
                <div id="placeholder" class="card-placeholder">è¯·é€‰æ‹©é¢˜å‹å¹¶ç‚¹å‡»ä¸Šæ–¹â€œæ·»åŠ é¢˜å¡â€å¼€å§‹åˆ›å»ºé¢˜ç›®</div>
                <div id="materialSubtypePopup" class="material-popup" style="display:none;">
                    <div style="font-size:16px; margin-bottom:10px;">è¯·é€‰æ‹©ææ–™é¢˜å­ç±»å‹ï¼š</div>
                    <div style="display:flex; gap:8px; flex-wrap:wrap;">
                        <button class="subtype-btn">å•é€‰é¢˜å¹²æ— å›¾</button>
                        <button class="subtype-btn">å•é€‰é¢˜å¹²æœ‰å›¾</button>
                        <button class="subtype-btn">å¤šé€‰é¢˜å¹²æ— å›¾</button>
                        <button class="subtype-btn">å¤šé€‰é¢˜å¹²æœ‰å›¾</button>
                        <button class="subtype-btn">å¡«ç©ºé¢˜å¹²æ— å›¾</button>
                        <button class="subtype-btn">å¡«ç©ºé¢˜å¹²æœ‰å›¾</button>
                    </div>
                </div>
            </div>
        </div>
    </div>    <!-- å…ˆå¼•å…¥å¡ç‰‡ç›¸å…³é€»è¾‘ -->
    <script src="cards.js"></script>
    <!-- å¼•å…¥å¡ç‰‡å¢å¼ºé€»è¾‘ -->
    <script src="cards-enhancement.js"></script>    <!-- å¼•å…¥å›¾ç‰‡åˆ é™¤åŠŸèƒ½ -->
    <script src="delete-images.js"></script>
    <!-- å¼•å…¥å›¾ç‰‡ä¸‹æ‹‰èœå•æ¸²æŸ“å™¨ -->
    <script src="image-dropdown-renderer.js"></script>
    <!-- å¼•å…¥å¡ç‰‡å›¾ç‰‡æŒ‰é’®å¤„ç† -->
    <script src="card-image-buttons.js"></script>
    <!-- åŠ¨æ€æ·»åŠ æ¸…ç©ºå›¾ç‰‡æŒ‰é’® -->
    <script src="add-clear-buttons.js"></script>
    <!-- å¼•å…¥å¯¼å‡ºé€»è¾‘ -->
    <script src="export.js"></script>

    <script>
        // ===== å·¦ä¾§é¢„è§ˆæ•°æ®ç»“æ„ & æ¸²æŸ“ =====
        const slidePreviewList = document.getElementById('slidePreviewList');
        const cardListElem = document.getElementById('cardList');

        // ç»‘å®šé¡¶éƒ¨å·¥å…·æ æŒ‰é’®
        document.getElementById('previewBtn').onclick = function() {
            if (window.previewQuestionBank) window.previewQuestionBank();
        };
        document.getElementById('exportBtn').onclick = function() {
            if (window.exportQuestionBank) window.exportQuestionBank();
        };
        const modifyBtn = document.getElementById('modifyBtn');
        if (modifyBtn) {
            modifyBtn.onclick = function() {
                if (window.modifyQuestionBank) {
                    window.modifyQuestionBank();
                } else {
                    alert('modifyQuestionBank å°šæœªåŠ è½½ï¼Œç¨åé‡è¯•');
                }
            };
        }

        // é¢„è§ˆ/é¢˜ç›®æ•°ç»„ï¼šç”¨æ¥ä¿æŒé¡ºåºï¼Œæ‰€æœ‰æ¸²æŸ“éƒ½ä»è¿™é‡Œæ¥
        const previewItems = []; // { id, cardElem, typeText, typeShort }
        let nextPreviewId = 1;

        // å…¨å±€é¢˜å· & å„é¢˜å‹å†…éƒ¨è®¡æ•°ï¼ˆæ¸²æŸ“æ—¶ä½¿ç”¨ï¼‰
        let globalQuestionId = 1;
        const typeCounters = { SC: 0, MC: 0, SCIMG: 0, MCIMG: 0, FL: 0, FLIMG: 0, DR: 0, OT: 0 };

        function getTypeShortAndLabel(typeText) {
            switch (typeText) {
                case 'å•é€‰é¢˜å¹²æ— å›¾': return { short: 'SC', label: 'SC' };
                case 'å¤šé€‰é¢˜å¹²æ— å›¾': return { short: 'MC', label: 'MC' };
                case 'å•é€‰é¢˜å¹²æœ‰å›¾': return { short: 'SCIMG', label: 'SCIMG' };
                case 'å¤šé€‰é¢˜å¹²æœ‰å›¾': return { short: 'MCIMG', label: 'MCIMG' };
                case 'å¡«ç©ºé¢˜å¹²æ— å›¾': return { short: 'FL', label: 'FL' };
                case 'å¡«ç©ºé¢˜å¹²æœ‰å›¾': return { short: 'FLIMG', label: 'FLIMG' };
                case 'ææ–™é¢˜': return { short: 'DR', label: 'DR' };
                default: return { short: 'OT', label: typeText };
            }
        }

        function getTypeTextFromCard(cardElem) {
            const label = cardElem.querySelector('.card-type-label');
            if (!label) return 'å…¶ä»–';
            const cls = label.classList;
            if (cls.contains('scimg')) return 'å•é€‰é¢˜å¹²æœ‰å›¾';
            if (cls.contains('mcimg')) return 'å¤šé€‰é¢˜å¹²æœ‰å›¾';
            if (cls.contains('mc')) return 'å¤šé€‰é¢˜å¹²æ— å›¾';
            if (cls.contains('sc')) return 'å•é€‰é¢˜å¹²æ— å›¾';
            if (cls.contains('flimg')) return 'å¡«ç©ºé¢˜å¹²æœ‰å›¾';
            if (cls.contains('fl')) return 'å¡«ç©ºé¢˜å¹²æ— å›¾';
            if (cls.contains('mt')) return 'ææ–™é¢˜';
            return 'å…¶ä»–';
        }

        function getPreviewTypeClass(typeText) {
            if (typeText === 'å•é€‰é¢˜å¹²æ— å›¾') return 'preview-sc';
            if (typeText === 'å¤šé€‰é¢˜å¹²æ— å›¾') return 'preview-mc';
            if (typeText === 'å•é€‰é¢˜å¹²æœ‰å›¾') return 'preview-scimg';
            if (typeText === 'å¤šé€‰é¢˜å¹²æœ‰å›¾') return 'preview-mcimg';
            if (typeText === 'å¡«ç©ºé¢˜å¹²æ— å›¾') return 'preview-fl';
            if (typeText === 'å¡«ç©ºé¢˜å¹²æœ‰å›¾') return 'preview-flimg';
            if (typeText === 'ææ–™é¢˜') return 'preview-mt';
            return 'preview-other';
        }

        // é‡æ–°æ¸²æŸ“å·¦ä¾§é¢„è§ˆåˆ—è¡¨ï¼ˆç»Ÿä¸€ç»˜åˆ¶ï¼šitem + ä¸‹æ–¹åˆ†å‰²çº¿ï¼‰
        function renderPreviewList() {
            slidePreviewList.innerHTML = '';
            globalQuestionId = 1;
            typeCounters.SC = typeCounters.MC = typeCounters.SCIMG = typeCounters.MCIMG = typeCounters.FL = typeCounters.FLIMG = typeCounters.DR = typeCounters.OT = 0;

            // é¡¶éƒ¨å…ˆæ”¾ä¸€æ¡åˆ†å‰²çº¿ï¼Œå¯¹åº”â€œæ’å…¥åˆ°ç¬¬ 0 ä¸ªä¹‹å‰â€
            if (previewItems.length > 0) {
                const topLine = document.createElement('div');
                topLine.className = 'slide-insert-line';
                topLine.dataset.afterIndex = -1; // è¡¨ç¤ºæ’åœ¨æœ€å‰é¢
                slidePreviewList.appendChild(topLine);
            }            previewItems.forEach((item, index) => {
                const typeInfo = getTypeShortAndLabel(item.typeText);
                if (!typeCounters[typeInfo.short]) typeCounters[typeInfo.short] = 0;
                typeCounters[typeInfo.short] += 1;
                const typeOrder = typeCounters[typeInfo.short];
                
                // å°†å…¨å±€é¢˜å·å­˜å‚¨åˆ°å¡ç‰‡å…ƒç´ çš„ data å±æ€§ä¸­
                const cardElem = item.cardElem;
                if (cardElem) {
                    cardElem.dataset.globalQuestionId = globalQuestionId;
                    cardElem.dataset.typeOrder = typeOrder;
                }

                const wrapper = document.createElement('div');
                wrapper.className = 'slide-preview-item ' + getPreviewTypeClass(item.typeText);
                wrapper.draggable = true;
                wrapper.dataset.pid = item.id;

                const mainLine = document.createElement('div');
                mainLine.className = 'slide-preview-mainline';
                mainLine.innerHTML = `
                    <span class="tag-type">ã€${typeInfo.label}ã€‘</span>
                    <span class="tag-qid">ã€é¢˜å·:${globalQuestionId}ã€‘</span>
                    <span class="tag-type-order">ã€é¢˜å‹:${typeOrder}ã€‘</span>
                `;
                const titleLine = document.createElement('div');
                titleLine.className = 'slide-preview-title';
                titleLine.textContent = 'ï¼ˆæœªå¡«å†™é¢˜å¹²ï¼‰';

                if (item.typeText === 'ææ–™é¢˜') {
                    const matInput = cardElem.querySelector('.material-input');
                    if (matInput) {
                        const txt = matInput.value.trim();
                        titleLine.textContent = txt ? txt.slice(0, 18) : 'ï¼ˆæœªå¡«å†™ææ–™ï¼‰';
                    } else {
                        titleLine.textContent = 'ï¼ˆæœªå¡«å†™ææ–™ï¼‰';
                    }
                } else {
                    const stemInput = cardElem.querySelector('.stem-input');
                    if (stemInput) {
                        const txt = stemInput.value.trim();
                        titleLine.textContent = txt ? txt.slice(0, 18) : 'ï¼ˆæœªå¡«å†™é¢˜å¹²ï¼‰';
                    }
                }

                wrapper.appendChild(mainLine);
                wrapper.appendChild(titleLine);

                // ç‚¹å‡»ï¼šé«˜äº® + æ»šåŠ¨åˆ°å¡ç‰‡
                wrapper.onclick = function () {
                    document.querySelectorAll('.slide-preview-item').forEach(it => it.classList.remove('active'));
                    wrapper.classList.add('active');
                    cardElem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                };

                // æ‹–æ‹½äº‹ä»¶
                wrapper.addEventListener('dragstart', function (e) {
                    draggingPreviewId = item.id;
                    wrapper.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', '');
                });
                wrapper.addEventListener('dragend', function () {
                    wrapper.classList.remove('dragging');

                    const line = activeInsertLine;
                    const draggedId = draggingPreviewId;

                    draggingPreviewId = null;
                    clearAllInsertLineActive();

                    if (!line || draggedId == null) {
                        // æ²¡æœ‰æ¿€æ´»çš„åˆ†å‰²çº¿ï¼Œä¸æ”¹å˜é¡ºåºï¼Œä»…ç®€å•é‡ç»˜
                        renderPreviewList();
                        return;
                    }

                    const afterIndex = parseInt(line.dataset.afterIndex, 10);
                    const fromIndex = previewItems.findIndex(p => p.id === draggedId);
                    if (fromIndex !== -1) {
                        const moved = previewItems.splice(fromIndex, 1)[0];
                        let insertPos = afterIndex + 1;
                        if (fromIndex < insertPos) insertPos--;
                        if (insertPos < 0) insertPos = 0;
                        if (insertPos > previewItems.length) insertPos = previewItems.length;
                        previewItems.splice(insertPos, 0, moved);
                    }

                    // æ ¹æ®æ–°çš„é¡ºåºç»Ÿä¸€é‡ç»˜ + åŒæ­¥å³ä¾§ + åˆ·æ–°åºå·
                    renderPreviewList();
                    syncCardOrderWithPreview();
                    refreshAllIndexes();
                });

                slidePreviewList.appendChild(wrapper);

                const line = document.createElement('div');
                line.className = 'slide-insert-line';
                line.dataset.afterIndex = index;
                slidePreviewList.appendChild(line);

                globalQuestionId += 1;
            });
        }

        function syncCardOrderWithPreview() {
            const frag = document.createDocumentFragment();
            previewItems.forEach(item => {
                if (item.cardElem && item.cardElem.parentNode === cardListElem) {
                    frag.appendChild(item.cardElem);
                }
            });
            cardListElem.appendChild(frag);
            refreshAllIndexes();
        }

        // åˆ é™¤/æ·»åŠ ååˆ·æ–°å¡ç‰‡ä¸Šçš„é¢˜å‹åºå·ä»¥åŠå·¦ä¾§ã€é¢˜å·ã€‘ã€é¢˜å‹ã€‘
        function refreshAllIndexes() {
            globalQuestionId = 1;
            typeCounters.SC = typeCounters.MC = typeCounters.SCIMG = typeCounters.MCIMG = typeCounters.FL = typeCounters.FLIMG = typeCounters.DR = typeCounters.OT = 0;
            const cards = cardListElem.children;
            for (let i = 0; i < cards.length; i++) {
                const card = cards[i];
                const typeText = getTypeTextFromCard(card);
                const info = getTypeShortAndLabel(typeText);
                if (!typeCounters[info.short]) typeCounters[info.short] = 0;
                typeCounters[info.short] += 1;
                const typeOrder = typeCounters[info.short];
                const idxSpan = card.querySelector('.card-index');
                if (idxSpan) idxSpan.textContent = typeOrder;
                globalQuestionId += 1;
            }
        }

        // æ‹–æ‹½ç›¸å…³ï¼šå½“å‰æ­£åœ¨æ‹–åŠ¨çš„é¢„è§ˆ id & æ¸…é™¤æ‰€æœ‰é«˜äº®çº¿
        let draggingPreviewId = null;
        let activeInsertLine = null; // å½“å‰æ¿€æ´»çš„æ’å…¥åˆ†å‰²çº¿
        function clearAllInsertLineActive() {
            slidePreviewList.querySelectorAll('.slide-insert-line.active').forEach(l => l.classList.remove('active'));
            activeInsertLine = null;
        }

        // åˆ†å‰²çº¿é«˜äº®ä¸æ•°ç»„é‡æ’
        slidePreviewList.addEventListener('dragover', function (e) {
            if (!draggingPreviewId) return;
            const target = e.target;
            if (!target.classList.contains('slide-insert-line')) return;
            e.preventDefault();
            clearAllInsertLineActive();
            target.classList.add('active');
            activeInsertLine = target;
        });

        slidePreviewList.addEventListener('drop', function (e) {
            if (!draggingPreviewId) return;
            e.preventDefault();
        });        // ===== å¯¹å¤–ï¼šæ·»åŠ  / åˆ é™¤ é¢˜ç›®æ—¶ç»´æŠ¤ previewItems =====
        function registerNewCard(cardElem, typeText) {
            const info = getTypeShortAndLabel(typeText);
            const pid = nextPreviewId++;
            previewItems.push({ id: pid, cardElem, typeText, typeShort: info.short });
            const stemInput = cardElem.querySelector('.stem-input');
            if (stemInput) {
                stemInput.addEventListener('input', () => {
                    renderPreviewList();
                });
            }
            renderPreviewList();
            syncCardOrderWithPreview();
            refreshAllIndexes();
        }

        function unregisterCard(cardElem) {
            const idx = previewItems.findIndex(p => p.cardElem === cardElem);
            if (idx !== -1) previewItems.splice(idx, 1);
            renderPreviewList();
            syncCardOrderWithPreview();
            refreshAllIndexes();
        }
        
        // æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨ï¼ˆä¾› export.js ä½¿ç”¨ï¼‰
        window.getPreviewItems = function() {
            return previewItems;
        };
        window.getCardOrderedByPreview = function() {
            return previewItems.map(item => item.cardElem);
        };

        // ===== åŸæœ‰é¢˜å‹æŒ‰é’®é€»è¾‘ / æ·»åŠ é¢˜å¡é€»è¾‘ =====
        let currentType = null;
        const typeBtns = document.querySelectorAll('.type-btn');
        typeBtns.forEach(btn => {
            btn.onclick = function() {
                typeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentType = btn.textContent;
                document.getElementById('materialSubtypePopup').style.display = 'none';
            };
        });
        typeBtns[0].click();

        let cardIndex = 1;
        document.getElementById('addCardBtn').onclick = function() {
            const placeholder = document.getElementById('placeholder');
            placeholder.style.display = 'none';

            let newCard = null;
            if(currentType === 'å•é€‰é¢˜å¹²æ— å›¾' && window.createSingleChoiceCard) {
                newCard = window.createSingleChoiceCard(cardIndex++);
            } else if(currentType === 'å¤šé€‰é¢˜å¹²æ— å›¾' && window.createMultipleChoiceCard) {
                newCard = window.createMultipleChoiceCard(cardIndex++);
            } else if(currentType === 'å•é€‰é¢˜å¹²æœ‰å›¾' && window.createSingleChoiceWithStemImgCard) {
                newCard = window.createSingleChoiceWithStemImgCard(cardIndex++);
            } else if(currentType === 'å¤šé€‰é¢˜å¹²æœ‰å›¾' && window.createMultipleChoiceWithStemImgCard) {
                newCard = window.createMultipleChoiceWithStemImgCard(cardIndex++);
            } else if(currentType === 'å¡«ç©ºé¢˜å¹²æ— å›¾' && window.createFillBlankCard) {
                newCard = window.createFillBlankCard(cardIndex++);
            } else if(currentType === 'å¡«ç©ºé¢˜å¹²æœ‰å›¾' && window.createFillBlankWithStemImgCard) {
                newCard = window.createFillBlankWithStemImgCard(cardIndex++);
            } else if(currentType === 'ææ–™é¢˜' && window.createMaterialCard) {
                newCard = window.createMaterialCard(cardIndex++);
            } else {
                alert('æ­¤å¤„å°†æ·»åŠ â€œ' + currentType + 'â€é¢˜å¡ï¼ˆé™æ€é¢„è§ˆï¼‰ï¼Œè¯·åœ¨ cards.js ä¸­å®ç°å¯¹åº”çš„åˆ›å»ºå‡½æ•°ã€‚');
            }

            if (newCard) {
                cardListElem.appendChild(newCard);
                registerNewCard(newCard, currentType);
            }
        };        // åˆ é™¤ææ–™å­ç±»å‹å¼¹çª—çš„å ä½é€»è¾‘ï¼ˆä¿ç•™ç»“æ„ï¼Œä½†ä¸å†ä½¿ç”¨ï¼‰
        document.querySelectorAll('#materialSubtypePopup .subtype-btn').forEach(btn => {
            btn.onclick = function() {
                document.getElementById('materialSubtypePopup').style.display = 'none';
            };
        });

        // åˆ é™¤äº‹ä»¶ï¼šç§»é™¤å¡ç‰‡å¹¶ä» previewItems ä¸­æ³¨é”€
        window.addEventListener('card-delete', function (e) {
            const card = e.detail && e.detail.card;
            if (!card) return;
            if (card.parentNode) card.parentNode.removeChild(card);
            unregisterCard(card);
        });

        // ========== å¯¼å‡ºå’Œé¢„è§ˆæŒ‰é’® ==========
        document.getElementById('previewBtn').onclick = function() {
            if (typeof window.previewQuestionBank === 'function') {
                window.previewQuestionBank();
            } else {
                alert('é¢„è§ˆåŠŸèƒ½æœªåŠ è½½ï¼Œè¯·æ£€æŸ¥export.jsæ˜¯å¦æ­£ç¡®å¼•å…¥');
            }
        };

        document.getElementById('exportBtn').onclick = function() {
            if (typeof window.exportQuestionBank === 'function') {
                window.exportQuestionBank();
            } else {
                alert('å¯¼å‡ºåŠŸèƒ½æœªåŠ è½½ï¼Œè¯·æ£€æŸ¥export.jsæ˜¯å¦æ­£ç¡®å¼•å…¥');
            }
        };

        // åœ¨bodyæœ«å°¾æ·»åŠ lightboxå¼¹çª—ç»“æ„
        const lightbox = document.createElement('div');
        lightbox.id = 'img-lightbox';
        lightbox.style = 'display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;';
        lightbox.innerHTML = `
            <div style="position:relative;max-width:90vw;max-height:90vh;">
                <img id="lightbox-img" src="" style="max-width:90vw;max-height:90vh;border-radius:8px;box-shadow:0 2px 16px #0008;">
                <span id="lightbox-close" style="position:absolute;top:-32px;right:0;font-size:32px;color:#fff;cursor:pointer;">Ã—</span>
            </div>
        `;
        document.body.appendChild(lightbox);
        document.getElementById('lightbox-close').onclick = function(){
            lightbox.style.display = 'none';
            document.getElementById('lightbox-img').src = '';
        };
        lightbox.onclick = function(e){
            if(e.target === lightbox){
                lightbox.style.display = 'none';
                document.getElementById('lightbox-img').src = '';
            }
        };
    </script>

    <!-- ç»‘å®šé¢„è§ˆå’Œå¯¼å‡ºæŒ‰é’® -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // é¢„è§ˆæŒ‰é’®
            const previewBtn = document.getElementById('previewBtn');
            if (previewBtn) {
                previewBtn.addEventListener('click', function() {
                    if (typeof previewQuestionBank === 'function') {
                        previewQuestionBank();
                    } else {
                        alert('é¢„è§ˆåŠŸèƒ½æœªåŠ è½½');
                    }
                });
            }

            // å¯¼å‡ºæŒ‰é’®
            const exportBtn = document.getElementById('exportBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', function() {
                    if (typeof exportQuestionBank === 'function') {
                        exportQuestionBank();
                    } else {
                        alert('å¯¼å‡ºåŠŸèƒ½æœªåŠ è½½');
                    }
                });
            }

            console.log('âœ“ é¢„è§ˆå’Œå¯¼å‡ºæŒ‰é’®å·²ç»‘å®š');
        });
    </script>
</body>
</html>
``` 